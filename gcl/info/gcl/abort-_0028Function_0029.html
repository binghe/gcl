<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>abort (Function) (ANSI and GNU Common Lisp Document)</title>

<meta name="description" content="abort (Function) (ANSI and GNU Common Lisp Document)">
<meta name="keywords" content="abort (Function) (ANSI and GNU Common Lisp Document)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html" rel="start" title="Top">
<link href="Conditions-Dictionary.html" rel="up" title="Conditions Dictionary">
<link href="Symbols.html" rel="next" title="Symbols">
<link href="use_002dvalue.html" rel="prev" title="use-value">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<span id="abort-_0028Function_0029"></span><div class="header">
<p>
Previous: <a href="use_002dvalue.html" accesskey="p" rel="prev">use-value</a>, Up: <a href="Conditions-Dictionary.html" accesskey="u" rel="up">Conditions Dictionary</a> &nbsp; </p>
</div>
<hr>
<span id="abort_002c-continue_002c-muffle_002dwarning_002c-store_002dvalue_002c-use_002dvalue-_005bFunction_005d"></span><h4 class="subsection">9.2.46 abort, continue, muffle-warning, store-value, use-value          [Function]</h4>

<span id="index-abort"></span>

<span id="index-continue"></span>

<span id="index-muffle_002dwarning"></span>

<span id="index-store_002dvalue"></span>

<span id="index-use_002dvalue"></span>

<p><code>abort</code>  <i><span class="roman">&amp;optional</span> condition</i> 
       &rArr;  #&lt;NoValue&gt;
</p>
<p><code>continue</code>  <i><span class="roman">&amp;optional</span> condition</i> &rArr;  <i><b>nil</b></i>
</p>
<p><code>muffle-warning</code>  <i><span class="roman">&amp;optional</span> condition</i> 
       &rArr;  #&lt;NoValue&gt;
</p>
<p><code>store-value</code>  <i>value <span class="roman">&amp;optional</span> condition</i> &rArr;  <i><b>nil</b></i>
</p>
<p><code>use-value</code>  <i>value <span class="roman">&amp;optional</span> condition</i> &rArr;  <i><b>nil</b></i>
</p>
<span id="Arguments-and-Values_003a_003a-157"></span><h4 class="subsubheading">Arguments and Values::</h4>

<p><i>value</i>&mdash;an <i>object</i>.
</p>
<p><i>condition</i>&mdash;a <i>condition</i> <i>object</i>, or <b>nil</b>.
</p>
<span id="Description_003a_003a-216"></span><h4 class="subsubheading">Description::</h4>

<p>Transfers control to the most recently established <i>applicable restart</i>
having the same name as the function.  That is,
  the <i>function</i> <b>abort</b>    searches for an <i>applicable</i> <b>abort</b>    <i>restart</i>, 
  the <i>function</i> <b>continue</b> searches for an <i>applicable</i> <b>continue</b> <i>restart</i>,
and so on.
</p>
<p>If no such <i>restart</i> exists, 
the functions
     <b>continue</b>,
     <b>store-value</b>, 
 and <b>use-value</b>
return <b>nil</b>, and 
the functions
     <b>abort</b>
 and <b>muffle-warning</b>
signal an error of <i>type</i> <b>control-error</b>.
</p>
<p>When <i>condition</i> is <i>non-nil</i>,
only those <i>restarts</i> are considered that are 
  either explicitly associated with that <i>condition</i>,
      or not associated with any <i>condition</i>;
that is, the excluded <i>restarts</i> are 
those that are associated with a non-empty set of <i>conditions</i>
of which the given <i>condition</i> is not an <i>element</i>.
If <i>condition</i> is <b>nil</b>, all <i>restarts</i> are considered.
</p>
<span id="Examples_003a_003a-140"></span><h4 class="subsubheading">Examples::</h4>

<div class="example">
<pre class="example">;;; Example of the ABORT retart

 (defmacro abort-on-error (&amp;body forms)
   `(handler-bind ((error #'abort))
      ,@forms)) &rArr;  ABORT-ON-ERROR
 (abort-on-error (+ 3 5)) &rArr;  8
 (abort-on-error (error &quot;You lose.&quot;))
<tt> |&gt; </tt> Returned to Lisp Top Level.

;;; Example of the CONTINUE restart

 (defun real-sqrt (n)
   (when (minusp n)
     (setq n (- n))
     (cerror &quot;Return sqrt(~D) instead.&quot; &quot;Tried to take sqrt(-~D).&quot; n))
   (sqrt n))

 (real-sqrt 4) &rArr;  2
 (real-sqrt -9)
<tt> |&gt; </tt> Error: Tried to take sqrt(-9).
<tt> |&gt; </tt> To continue, type :CONTINUE followed by an option number:
<tt> |&gt; </tt>  1: Return sqrt(9) instead.
<tt> |&gt; </tt>  2: Return to Lisp Toplevel.
<tt> |&gt; </tt> Debug&gt; <b>|&gt;&gt;</b><tt>(continue)</tt><b>&lt;&lt;|</b>
<tt> |&gt; </tt> Return sqrt(9) instead.
&rArr;  3

 (handler-bind ((error #'(lambda (c) (continue))))
   (real-sqrt -9)) &rArr;  3

;;; Example of the MUFFLE-WARNING restart

 (defun count-down (x)
   (do ((counter x (1- counter)))
       ((= counter 0) 'done)
     (when (= counter 1)
       (warn &quot;Almost done&quot;))
     (format t &quot;~&amp;~D~
&rArr;  COUNT-DOWN
 (count-down 3)
<tt> |&gt; </tt> 3
<tt> |&gt; </tt> 2
<tt> |&gt; </tt> Warning: Almost done
<tt> |&gt; </tt> 1
&rArr;  DONE
 (defun ignore-warnings-while-counting (x)
   (handler-bind ((warning #'ignore-warning))
     (count-down x)))
&rArr;  IGNORE-WARNINGS-WHILE-COUNTING
 (defun ignore-warning (condition)
   (declare (ignore condition))
   (muffle-warning))
&rArr;  IGNORE-WARNING
 (ignore-warnings-while-counting 3)
<tt> |&gt; </tt> 3
<tt> |&gt; </tt> 2
<tt> |&gt; </tt> 1
&rArr;  DONE

;;; Example of the STORE-VALUE and USE-VALUE restarts

 (defun careful-symbol-value (symbol)
   (check-type symbol symbol)
   (restart-case (if (boundp symbol)
                     (return-from careful-symbol-value 
                                  (symbol-value symbol))
                     (error 'unbound-variable
                            :name symbol))
     (use-value (value)
       :report &quot;Specify a value to use this time.&quot;
       value)
     (store-value (value)
       :report &quot;Specify a value to store and use in the future.&quot;
       (setf (symbol-value symbol) value))))
 (setq a 1234) &rArr;  1234
 (careful-symbol-value 'a) &rArr;  1234
 (makunbound 'a) &rArr;  A
 (careful-symbol-value 'a)
<tt> |&gt; </tt> Error: A is not bound.
<tt> |&gt; </tt> To continue, type :CONTINUE followed by an option number.
<tt> |&gt; </tt>  1: Specify a value to use this time.
<tt> |&gt; </tt>  2: Specify a value to store and use in the future.
<tt> |&gt; </tt>  3: Return to Lisp Toplevel.
<tt> |&gt; </tt> Debug&gt; <b>|&gt;&gt;</b><tt>(use-value 12)</tt><b>&lt;&lt;|</b>
&rArr;  12
 (careful-symbol-value 'a)
<tt> |&gt; </tt> Error: A is not bound.
<tt> |&gt; </tt> To continue, type :CONTINUE followed by an option number.
<tt> |&gt; </tt>   1: Specify a value to use this time.
<tt> |&gt; </tt>   2: Specify a value to store and use in the future.
<tt> |&gt; </tt>   3: Return to Lisp Toplevel.
<tt> |&gt; </tt> Debug&gt; <b>|&gt;&gt;</b><tt>(store-value 24)</tt><b>&lt;&lt;|</b>
&rArr;  24
 (careful-symbol-value 'a)
&rArr;  24

;;; Example of the USE-VALUE restart

 (defun add-symbols-with-default (default &amp;rest symbols)
   (handler-bind ((sys:unbound-symbol
                    #'(lambda (c)
                        (declare (ignore c)) 
                        (use-value default))))
     (apply #'+ (mapcar #'careful-symbol-value symbols))))
&rArr;  ADD-SYMBOLS-WITH-DEFAULT
 (setq x 1 y 2) &rArr;  2
 (add-symbols-with-default 3 'x 'y 'z) &rArr;  6

</pre></div>

<span id="Side-Effects_003a_003a-18"></span><h4 class="subsubheading">Side Effects::</h4>

<p>A transfer of control may occur if an appropriate <i>restart</i> is available,
or (in the case of the <i>function</i> <b>abort</b> or the <i>function</i> <b>muffle-warning</b>)
execution may be stopped.
</p>
<span id="Affected-By_003a_003a-35"></span><h4 class="subsubheading">Affected By::</h4>

<p>Each of these functions can be affected by 
the presence of a <i>restart</i> having the same name.
</p>
<span id="Exceptional-Situations_003a_003a-49"></span><h4 class="subsubheading">Exceptional Situations::</h4>

<p>If an appropriate <b>abort</b> <i>restart</i>
 is not available for the <i>function</i> <b>abort</b>,
or an appropriate <b>muffle-warning</b> <i>restart</i> 
 is not available for the <i>function</i> <b>muffle-warning</b>,
an error of <i>type</i> <b>control-error</b> is signaled.
</p>
<span id="See-Also_003a_003a-190"></span><h4 class="subsubheading">See Also::</h4>

<p><a href="invoke_002drestart.html">invoke-restart</a>
,
<a href="Restarts.html">Restarts</a>,
<a href="Interfaces-to-Restarts.html">Interfaces to Restarts</a>,
<a href="assert.html">assert</a>
,
<b>ccase</b>,
<a href="cerror.html">cerror</a>
,
<a href="check_002dtype.html">check-type</a>
,
<b>ctypecase</b>,
<a href="use_002dvalue.html">use-value</a>
,
<a href="warn.html">warn</a>
</p>
<span id="Notes_003a_003a-114"></span><h4 class="subsubheading">Notes::</h4>

<div class="example">
<pre class="example"> (abort condition) &equiv; (invoke-restart 'abort)
 (muffle-warning)  &equiv; (invoke-restart 'muffle-warning)
 (continue)        &equiv; (let ((r (find-restart 'continue))) (if r (invoke-restart r)))
 (use-value <i>x</i>) &equiv; (let ((r (find-restart 'use-value))) (if r (invoke-restart r <i>x</i>)))
 (store-value x) &equiv; (let ((r (find-restart 'store-value))) (if r (invoke-restart r <i>x</i>)))
</pre></div>

<p>No functions defined in this specification are required to provide
a <b>use-value</b> <i>restart</i>.
</p>





<hr>
<div class="header">
<p>
Previous: <a href="use_002dvalue.html" accesskey="p" rel="prev">use-value</a>, Up: <a href="Conditions-Dictionary.html" accesskey="u" rel="up">Conditions Dictionary</a> &nbsp; </p>
</div>



</body>
</html>
